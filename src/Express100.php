<?php

/*
 * This file is part of the flex/express.
 *
 * (c) Flex<2345@mail.com>
 *
 * This source file is subject to the MIT license that is bundled
 * with this source code in the file LICENSE.
 */

namespace Flex\Express;

use Flex\Express\Exceptions\HttpException;
use Flex\Express\Exceptions\InvalidArgumentException;
use GuzzleHttp\Client;
use GuzzleHttp\Exception\GuzzleException;

class Express100
{
    protected $api = 'https://poll.kuaidi100.com/poll/query.do';

    protected $app_id;

    protected $app_key;

    protected $guzzleOptions = [];

    /**
     * Kuaidi100 constructor.
     *
     * @param $app_id
     * @param $app_key
     */
    public function __construct($app_id, $app_key)
    {
        $this->app_id = $app_id;
        $this->app_key = $app_key;
    }

    /**
     * 快递查询.
     *
     * @param string $tracking_code 快递单号
     * @param string $shipping_code 物流公司单号
     * @param string $phone
     *
     * @return string
     *
     * @throws InvalidArgumentException
     * @throws HttpException
     */
    public function track($tracking_code = '', $shipping_code = '', $phone = '')
    {
        if (empty($tracking_code)) {
            throw new InvalidArgumentException('TrackingCode is required');
        }

        if (empty($shipping_code)) {
            throw new InvalidArgumentException('ShippingCode is required');
        }

        $allow_shipping_code = [
            'yuantong',
            'yunda',
            'shentong',
            'jtexpress',
            'zhongtong',
            'youzhengguonei',
            'shunfeng',
            'ems',
            'jd',
            'youzhengbk',
            'fengwang',
            'debangkuaidi',
            'debangwuliu',
            'feibaokuaidi',
            'zhongtongkuaiyun',
            'annengwuliu',
            'huitongkuaidi',
            'ctoexp',
            'yundakuaiyun',
            'ewe',
            'lianhaowuliu',
            'lntjs',
            'zhaijisong',
            'kuayue',
            'baishiwuliu',
            'youshuwuliu',
            'danniao',
            'yimidida',
            'jingdongkuaiyun',
            'sxjdfreight',
            'annto',
            'anxl',
            'rrs',
            'shunfengkuaiyun',
            'dhl',
            'youzhengguoji',
            'jiayunmeiwuliu',
            'upsen',
            'subida',
            'zhongtongguoji',
            'jinguangsudikuaijian',
            'disifang',
            'savor',
            'dhlen',
            'xinfengwuliu',
            'usps',
            'spring56',
            'huisenky',
            'auexpress',
            'ecmscn',
            'ups',
            'fedex',
            'xlobo',
            'emsguoji',
            'fedexcn',
            'dsukuaidi',
            'suteng',
            'dpduk',
            'shenghuiwuliu',
            'shpost',
            'suning',
            'ztky',
            'cosco',
            'timelytitan',
            'stosolution',
            'yaofeikuaidi',
            'tykd',
            'tiantian',
            'zy100',
            'hnfy',
            'suyoda',
            'ane66',
            'dpd',
            'lianbangkuaidi',
            'zhuanyunsifang',
            'yuxinwuliu',
            'tiandihuayu',
            'emsbg',
            'shunchangguoji',
            'jiayiwuliu',
            'zhaijibian',
            'shunfenglengyun',
            'nsf',
            'hd',
            'rokin',
            'pingandatengfei',
            'japanposten',
            'wherexpess',
            'zhengyikuaidi',
            'meiquick',
            'suer',
            'wtdchina',
            'ytchengnuoda',
            'yuantongguoji',
            'tnt',
            'nezhasuyun',
            'japanpost',
            'sut56',
            'aae',
            'kuaijiesudi',
            'jialidatong',
            'shunfenghk',
            'btexpress',
            'ftd',
            'dpdgermany',
            'gotoubi',
            'tnten',
            'mingliangwuliu',
            'doortodoor',
            'jgwl',
            'goex',
            'udalogistic',
            'fujisuyun',
            'sagawa',
            'sanhuwuliu',
            'cht361',
            'sunjex',
            'sja56',
            'hermes',
            'ocs',
            'jiuyescm',
            'lhexpressus',
            'zhongtiewuliu',
            'aramex',
            'sfwl',
            'arkexpress',
            'chinapost',
            'zhongyouex',
            'banma',
            'bpost',
            'uszcn',
            'huahanwuliu',
            'baitengwuliu',
            'taijin',
            'ubonex',
            'chukou1',
            'guotongkuaidi',
            'shiligyl',
            'adapost',
            'tnjex',
            'kejie',
            'yuntrack',
            'dhlde',
            'zhongsukuaidi',
            'longfx',
            'dfwl',
            'superb',
            'meitai',
            'gls',
            'datianwuliu',
            'huolalawuliu',
            'epanex',
            'yuananda',
            'auod',
            'koreapostcn',
            'jiajiwuliu',
            'lahuoex',
            'weitepai',
            'tzky',
            'ubuy',
            'jinan',
            'zhimakaimen',
            'huangmajia',
            'guexp',
            'newsway',
            'exfresh',
            'chuanxiwuliu',
            'fanqiu',
            'takesend',
            'com1express',
            'rlgaus',
            'ckexpress',
            'coe',
            'la911',
            'flyway',
            'passerbyaexpress',
            'emsinten',
            'aliexpress',
            'fenghuangkuaidi',
            'hengluwuliu',
            'tianma',
            'emswuliu',
            'postnl',
            'aotsd',
            'jiaxianwuliu',
            'bht',
            'sanzhi56',
            'ckeex',
            'tcat',
            'lingsong',
            'haiwaihuanqiu',
            'yangbaoguo',
            'parcelforcecn',
            'usa7ex',
            'wanxiangwuliu',
            'signedexpress',
            'wondersyd',
            'zhongji',
            'unitedex',
            'morelink56',
            'yzswuliu',
            'bphchina',
            'polarexpress',
            'jumstc',
            'erqianjia56',
            'cqxingcheng',
            'highsince',
            'nantianwuliu',
            'ndwl',
            'yuanchengwuliu',
            'zdepost',
            'tntitaly',
            'canpost',
            'cccc58',
            'manwah',
            'zlink',
            'quanyikuaidi',
            'zhongyouwuliu',
            'anjiekuaidi',
            'auspost',
            'yuejiutong',
            'yw56',
            'ftky365',
            'guangdongyouzhengwuliu',
            'amusorder',
            'nntengda',
            'bjemstckj',
            'jisu',
            'synship',
            'biaojikuaidi',
            'sxexpress',
            'chronopostport',
            'yamaxunwuliu',
            'ztocc',
            'sendtochina',
            'sundarexpress',
            'wanjiawuliu',
            'baifudongfang',
            'nzzto',
            'yufeng',
            'changwooair',
            'khzto',
            'nebuex',
            'mlw',
            'hrex',
            'cces',
            'bazirim',
            'shipgce',
            'xynyc',
            'lijisong',
            'youyou',
            'worldex',
            'fastgoexpress',
            'homecourier',
            'cd3fwl',
            'hnht56',
            'ydhex',
            'wanjiatong',
            'ztcce',
            'valueway',
            'jdiex',
            'yuntongkuaidi',
            'concare',
            'dflogis',
            'santaisudi',
            'buyer1688',
            'dekuncn',
            'shunfengnl',
            'postserv',
            'qinling',
            'beckygo',
            'postnlchina',
            'jtexpressth',
            'hkpost',
            'hotwms',
            'sdto',
            'hac56',
            'gzanjcwl',
            'canpostfr',
            'express2global',
            'sgxpress',
            'koreapostkr',
            'pochta',
            'zhonghuan',
            'ukrpostcn',
            'zengyisudi',
            'postnlcn',
            'kerrythailanden',
            'swisspostcn',
            'gdkjk56',
            'szyouzheng',
            'quanfengkuaidi',
            'sujievip',
            'cneulogistics',
            'disifangus',
            'yujiawl',
            'jingshun',
            'meixi',
            'yuanfeihangwuliu',
            'shangqiao56',
            'emsen',
            'szshihuatong56',
            'huif56',
            'youban',
            'shunjieda',
            '1ziton',
            'longcps',
            'beebird',
            'meiguokuaidi',
            'pjbest',
            'yongchangwuliu',
            'fbkd',
            'kuaijiewuliu',
            'sd138',
            'thailand',
            'correosdees',
            'ynztsy',
            'sfc',
            'szuem',
            'hdcexpress',
            'yongbangwuliu',
            'anxindakuaixi',
            'cnausu',
            'ganzhongnengda',
            'xiyoug',
            'crazyexpress',
            'dpdpoland',
            'boyol',
            'kuaika',
            'lianbangkuaidien',
            'uscbexpress',
            'anjie88',
            'fedexus',
            'hjwl',
            'gfdwuliu',
            'bhutan',
            'stoexpress',
            'tjkjwl',
            'csuivi',
            'jet',
            'yjhgo',
            'euasia',
            'shanxijianhua',
            'dhlhk',
            'gibraltar',
            'tmwexpress',
            'usasueexpress',
            'zhongwaiyun',
            'cnexps',
            'gslhkd',
            'xdexpress',
            'yousutongda',
            '360lion',
            'deutschepost',
            'zhonghuanus',
            'haidaibao',
            'ucs',
            'cyxfx',
            'myhermes',
            'youjia',
            'ccd',
            'parcelforce',
            'italiane',
            'zhongjiwuliu',
            'baishiguoji',
            'httx56',
            'airpak',
            'cjkoreaexpress',
            'longlangkuaidi',
            'sfpost',
            'wlwex',
            'flashexpressen',
            'mosuda',
            'wykjt',
            'yizhengdasuyun',
            '100mexpress',
            'qbexpress',
            'yijiangky',
            'xsrd',
            'qexpress',
            'dhlecommerce',
            'jinduan',
            'tntau',
            'igcaexpress',
            'pfcexpress',
            'correos',
            'feiyuanvipshop',
            'benteng',
            'minghangkuaidi',
            'bjlgyt',
            'wjkwl',
            'leshines',
            'oneexpress',
            'cdek',
            'dadaoex',
            'koali',
            'xyb2b',
            'bsht',
            'cnspeedster',
            'quantium',
            'dybservice',
            'kingfreight',
            'qesd',
            'quansu',
            'a2u',
            'ykouan',
            'efs',
            'hkposten',
            'xiangdawuliu',
            'yafengsudi',
            'baishiyp',
            'ontrac',
            'zsda56',
            'ycgky',
            'dpex',
            'jiujiuwl',
            'koreapost',
            'astexpress',
            'esinotrans',
            'zhonghongwl',
            'abf',
            'landmarkglobal',
            'easyexpress',
            'jtexpresseg',
            'juding',
            'quanxintong',
            'xunsuexpress',
            'zrtl',
            'changjiang',
            'di5pll',
            'flysman',
            'yuandun',
            'zhonganhuoyun',
            'jiacheng',
            'swiship',
            'gxwl',
            'yundaexus',
            'dpexen',
            'emms',
            'globaltracktrace',
            'nbhtt',
            'airgtc',
            'fastway',
            'lsexpress',
            'huanqiu',
            'safexpress',
            'stonewzealand',
            'feikangda',
            'huanqiuabc',
            'nanjingshengbang',
            'renrenex',
            'chengtong',
            'colissimo',
            'ftlexpress',
            'heimao56',
            'htongexpress',
            'pmt0704be',
            'stkd',
            'fardarww',
            'jiajikuaidi',
            'jssdt56',
            'runhengfeng',
            'saiaodimmb',
            'hlyex',
            'jcsuda',
            'jieanda',
            'jixianda',
            'abcglobal',
            'amcnorder',
            'city56',
            'dechuangwuliu',
            'express7th',
            'heibaowuliu',
            'hzpl',
            'yhtlogistics',
            'ytkd',
            'cnpex',
            'hkems',
            'sccod',
            'ajexpress',
            'dhlbenelux',
            'eiffel',
            'gooday365',
            'hpexpress',
            'huilin56',
            'shenjun',
            'suijiawuliu',
            'sutonghongda',
            'yiex',
            'kfwnet',
            'royal',
            'shangda',
            'sunspeedy',
            'transrush',
            'ueq',
            'zhongxinda',
            'anshidi',
            'chronopostfra',
            'cjqy',
            'feikuaida',
            'njhaobo',
            'swisspost',
            'yingchao',
            'belgiumpost',
            'chronopostfren',
            'cnup',
            'dande56',
            'dayangwuliu',
            'hgy56',
            'jiachenexpress',
            'luckyfastex',
            'portugalctt',
            'qinyuan',
            'republic',
            'rrskx',
            'ukraine',
            'cfss',
            'decnlh',
            'fox',
            'gts',
            'newgistics',
            'ninjavan',
            'polarisexpress',
            'qskdyxgs',
            'sczpds',
            'wln',
            'wuyuansudi',
            'yuntong',
            'ywexpress',
            'zenzen',
            'auvanda',
            'chengpei',
            'chinaicip',
            'hrbzykd',
            'shunjiefengda',
            'trakpak',
            'xiangteng',
            'xyd666',
            'adaexpress',
            'adp',
            'aolau',
            'chszhonghuanguoji',
            'chuangyi',
            'flowerkd',
            'happylink',
            'hongpinwuliu',
            'lineone',
            'ruidianyouzheng',
            'uspscn',
            'xjdaishu',
            'zjcy56',
            'alog',
            'bdatong',
            'botspost',
            'gsm',
            'ldxpres',
            'postnlpacle',
            'shanhuodidi',
            'shlindao',
            'ttkeurope',
            'xflt56',
            'ydglobe',
            'yodel',
            'aaacooper',
            'afl',
            'anposten',
            'austria',
            'bflg',
            'bmxps',
            'cdxinchen56',
            'chinastarlogistics',
            'chinatzx',
            'colombia',
            'fanyukuaidi',
            'fiji',
            'huada',
            'huiqiangkuaidi',
            'macao',
            'newzealand',
            'pakistan',
            'phlpost',
            'wandougongzhu',
            'wenjiesudi',
            'advancing',
            'afghan',
            'beiou',
            'boxc',
            'cdjx56',
            'cllexpress',
            'cloudexpress',
            'didasuyun',
            'edaeuexpress',
            'emonitoring',
            'eteenlog',
            'gaotieex',
            'goldjet',
            'haihongwangsong',
            'idada',
            'kaolaexpress',
            'lutong',
            'omni2',
            'purolator',
            'seur',
            'sfift',
            'sutongst',
            'tstexp',
            'wto56kj',
            'bangsongwuliu',
            'bpostinter',
            'brazilposten',
            'cnair',
            'edragon',
            'england',
            'estafeta',
            'exsuda',
            'farlogistis',
            'gda',
            'hkeex',
            'hnzqwl',
            'ht22',
            'ibuy8',
            'indonesia',
            'jtexpresssg',
            'junfengguoji',
            'kuaidawuliu',
            'kyue',
            'lianyun',
            'littlebearbear',
            'lizhan',
            'lqht',
            'malaysiaems',
            'omniva',
            'parcel2go',
            'postdanmarken',
            'saiaodi',
            'shanghaikuaitong',
            'shangtuguoji',
            'shenganwuliu',
            'shiyunkuaidi',
            'tny',
            'vnpost',
            'yuefengwuliu',
            'yujtong',
            'yyqc56',
            'zhuoshikuaiyun',
            'zsky123',
            'ztong',
            'aosu',
            'azerbaijan',
            'bahrain',
            'bmlchina',
            'byht',
            'chengji',
            'chinapostcb',
            'chunghwa56',
            'cpsair',
            'dhlnetherlands',
            'dhlpoland',
            'donghanwl',
            'fastontime',
            'fedexukcn',
            'feihukuaidi',
            'fsexp',
            'fyex',
            'gjwl',
            'global99',
            'gongsuda',
            'guangdongyongbang',
            'hermesworld',
            'hnssd56',
            'huaqikuaiyun',
            'hungary',
            'huoban',
            'hutongwuliu',
            'hzdr',
            'jindawuliu',
            'kuai8',
            'lfexpress',
            'longvast',
            'malaysiapost',
            'multipack',
            'pengcheng',
            'qpost',
            'scxingcheng',
            'shiningexpress',
            'shpostwish',
            'singpost',
            'speeda',
            'tjlyz56',
            'tlky',
            'tntuk',
            'tywl99',
            'uluckex',
            'xhf56',
            'xianchengliansudi',
            'xianglongyuntong',
            'xinning',
            'yihangmall',
            'yunfeng56',
            'zjstky',
            'adlerlogi',
            'amazoncnorder',
            'asendia',
            'ausbondexpress',
            'bee001',
            'bluedart',
            'canhold',
            'chunfai',
            'cnws',
            'dfpost',
            'dianyi',
            'dongjun',
            'duodao56',
            'dyexpress',
            'eta100',
            'fedroad',
            'freakyquick',
            'gatien',
            'gswtkd',
            'guoeryue',
            'hangyu',
            'hitaoe',
            'hmus',
            'homexpress',
            'india',
            'jdpplus',
            'jiajiatong56',
            'jiazhoumao',
            'jintongkd',
            'jiugong',
            'kerrytj',
            'kuaiyouda',
            'lithuania',
            'minbangsudi',
            'mmlogi',
            'mxe56',
            'namibia',
            'nell',
            'peex',
            'pengyuanexpress',
            'pinsuxinda',
            'posta',
            'quanritongkuaidi',
            'riyuwuliu',
            'selektvracht',
            'serbia',
            'shunshid',
            'skynet',
            'slovenia',
            'southafrican',
            'upsfreight',
            'vctrans',
            'vps',
            'westwing',
            'wuliuky',
            'xipost',
            'yinjiesudi',
            'yiqiguojiwuliu',
            'ytky168',
            'zhongtianwanyun',
            'zjgj56',
            'zyzoom',
            'adiexpress',
            'agopost',
            'ariesfar',
            'asendiausa',
            'ausexpress',
            'auvexpress',
            'bangladesh',
            'benniao',
            'bester',
            'bosind',
            'camekong',
            'ceva',
            'cex',
            'citylink',
            'clsp',
            'comexpress',
            'csxss',
            'dasu',
            'dindon',
            'dingdong',
            'donghong',
            'ecfirstclass',
            'eltahell',
            'etong',
            'eucnrail',
            'euexpress',
            'euguoji',
            'europe8',
            'guangdongtonglu',
            'haoyoukuai',
            'hengrui56',
            'hlkytj',
            'hongjie',
            'huandonglg',
            'humpline',
            'hyeship',
            'italysad',
            'jinchengwuliu',
            'jinyuekuaidi',
            'kcs',
            'ksudi',
            'letseml',
            'lishi',
            'lnet',
            'ltparcel',
            'lwe',
            'mangguo',
            'nepalpost',
            'nmhuahe',
            'nuoyaao',
            'ocaargen',
            'pinxinkuaidi',
            'pzhjst',
            'qhxykd',
            'quanchuan56',
            'romanian',
            'shunbang',
            'sinoairinex',
            'slovak',
            'sofast56',
            'starex',
            'stzd56',
            'superoz',
            'sxhongmajia',
            'sypost',
            'tanzania',
            'tongdaxing',
            'turtle',
            'uganda',
            'uzbekistan',
            'vietnam',
            'vipexpress',
            'wanboex',
            'xinmengcheng',
            'yatfai',
            'ycgglobal',
            'youlai',
            'yourscm',
            'ypsd',
            'yue777',
            'zhdwl',
            'zteexpress',
            'ztwlgyl',
            'ahdf',
            'ahkbps',
            'aland',
            'albania',
            'alfatrex',
            'alliedexpress',
            'anjiatongcheng',
            'apgecommerce',
            'aplus100',
            'auex',
            'axexpress',
            'bangbangpost',
            'baotongkd',
            'bcwelt',
            'belpost',
            'bjqywl',
            'bjxsrd',
            'bljt56',
            'bolivia',
            'bqcwl',
            'buytong',
            'cambodia',
            'cameroon',
            'campbellsexpress',
            'canpar',
            'chengda',
            'chile',
            'chnexp',
            'cypruspost',
            'czwlyn',
            'dcs',
            'ddotbase',
            'dhluk',
            'directlink',
            'disifangau',
            'dtdcindia',
            'ealceair',
            'edtexpress',
            'emssouthafrica',
            'emsukraine',
            'emsukrainecn',
            'est365',
            'estes',
            'eucpost',
            'eupackage',
            'eusacn',
            'everwellmarine',
            'excocotree',
            'fengtianexpress',
            'finland',
            'gatikwe',
            'gdct56',
            'gdrz58',
            'ghl',
            'gslexpress',
            'gttexpress',
            'guanting',
            'guoshunda',
            'guosong',
            'gzxingcheng',
            'h66',
            'hanfengjl',
            'hangrui',
            'hanxin',
            'haoxiangwuliu',
            'hexinexpress',
            'hltop',
            'hqtd',
            'hre',
            'hrvatska',
            'hsgtsd',
            'hyytes',
            'idamalu',
            'imile',
            'interjz',
            'iran',
            'iyoungspeed',
            'jamaicapost',
            'jcex',
            'jdexpressusa',
            'jiajiawl',
            'jieborne',
            'jiguang',
            'jixiangyouau',
            'juzhongda',
            'kjde',
            'lanbiaokuaidi',
            'lasership',
            'lbbk',
            'linex',
            'lubang56',
            'luben',
            'luyao',
            'luzun',
            'lx56',
            'mailikuaidi',
            'mauritius',
            'mexicodenda',
            'mjexp',
            'moldova',
            'montenegro',
            'mrw',
            'nalexpress',
            'nederlandpost',
            'niuzaiexpress',
            'nle',
            'nlebv',
            'novaposhta',
            'nuoer',
            'ocpost',
            'onehcang',
            'overseaex',
            'parcelchina',
            'pcaexpress',
            'pcwl56',
            'peru',
            'portugalctten',
            'postenab',
            'postnord',
            'ptt',
            'qhxyyg',
            'qianli',
            'quantwl',
            'rhtexpress',
            'rpx',
            'rrthk',
            'runbail',
            'rwanda',
            's2c',
            'sanshengco',
            'shanda56',
            'shangcheng',
            'shaoke',
            'shd56',
            'shenma',
            'shipbyace',
            'shipsoho',
            'sihaiet',
            'sihiexpress',
            'sinoex',
            'skynetmalaysia',
            'speedoex',
            'speedpost',
            'sucheng',
            'sucmj',
            'supinexpress',
            'taimek',
            'tcixps',
            'tdcargo',
            'thunderexpress',
            'tntpostcn',
            'tollpriority',
            'tonghetianxia',
            'trackparcel',
            'tunisia',
            'uexiex',
            'uhi',
            'utaoscm',
            'wotu',
            'wowvip',
            'wtdex',
            'wzhaunyun',
            'xdshipping',
            'xhongda56',
            'xlair',
            'xpressbees',
            'ydl56',
            'yemen',
            'yibangwuliu',
            'yifankd',
            'yikonn',
            'yilingsuyun',
            'yiqisong',
            'yisong',
            'yitongda',
            'yjs',
            'yuanhhk',
            'yuanzhijiecheng',
            'zbhy56',
            'zesexpress',
            'zhaojin',
            'zhitengwuliu',
            'zhongchuan',
            'zhpex',
            'zhudiankuaiyun',
            'abs',
            'abxexpress_my',
            'acommerce',
            'acscourier',
            'adsone',
            'agility',
            'ajlogistics',
            'algeria',
            'amazon_fba_swiship',
            'anjun_logistics',
            'anlexpress',
            'anteraja',
            'apc',
            'arc',
            'aruba',
            'asendiahk',
            'auadexpress',
            'austa',
            'baoxianda',
            'barbados',
            'bdcgcc',
            'beeexpress',
            'belize',
            'benin',
            'betterlife',
            'bjytsywl',
            'bohei',
            'borderguru',
            'bosta',
            'bridgeexpress',
            'briems',
            'brt',
            'brunei',
            'bulgarian',
            'buylogic',
            'caledonia',
            'cargolux',
            'cbl',
            'cbl_logistica',
            'cbllogistics',
            'cbo56',
            'ceskaposta',
            'cevalogistics',
            'changyousudi',
            'chengning',
            'chinaqingguan',
            'chinasqk',
            'chllog',
            'citysprint',
            'cloudlogistics365',
            'cncexp',
            'collectplus',
            'corporatecouriers',
            'correios',
            'correo',
            'correoargentino',
            'correosexpress',
            'courierpost',
            'couriersplease',
            'crossbox',
            'dachser',
            'deksu',
            'delhivery',
            'deliverystations',
            'deltec',
            'deployeg',
            'desworks',
            'dfglobalex',
            'djibouti',
            'djy56',
            'dotzot',
            'dpd_ireland',
            'dpe_express',
            'dreevo',
            'driverfastgo',
            'dsv',
            'dt8ang',
            'dtd',
            'dushisc',
            'ecallturn',
            'echo',
            'ecmsglobal',
            'ecomexpress',
            'ecotransite',
            'ecuador',
            'efspost',
            'egyexpress',
            'egypt',
            'egyptexpress',
            'ekart',
            'el56',
            'elta',
            'emirates',
            'emiratesen',
            'emonitoringen',
            'emsluqu',
            'epspost',
            'equick_cn',
            'eripostal',
            'eshunda',
            'ethiopia',
            'ethiopian',
            'europeanecom',
            'exbtr',
            'expeditors',
            'explorer56',
            'expressplus',
            'ezhuanyuan',
            'fandaguoji',
            'fastway_nz',
            'fastway_za',
            'fastzt',
            'fds',
            'fedexuk',
            'fengyee',
            'firstflight',
            'firstlogistics',
            'flashexpress',
            'flextock',
            'fodel',
            'fourpxus',
            'gaticn',
            'gdex',
            'gdqwwl',
            'gdxp',
            'ge2d',
            'georgianpost',
            'gexpress',
            'ghanapost',
            'ghtexpress',
            'giztix',
            'gls_italy',
            'gml',
            'gogox',
            'gojavas',
            'grab',
            'greenland',
            'grivertek',
            'gscq365',
            'gtgogo',
            'guernsey',
            'guyana',
            'gvpexpress',
            'haihongmmb',
            'haimengsudi',
            'haixingqiao',
            'haizhongzhuanyun',
            'handboy',
            'haypost',
            'hermes_de',
            'hhair56',
            'highway',
            'hjs',
            'hlpgyl',
            'hnqst',
            'holisollogistics',
            'honduras',
            'hongbeixin',
            'hongywl',
            'hrbsydrd',
            'hsdexpress',
            'htwd',
            'huaxiahuoyun',
            'hunterexpress',
            'hyk',
            'hywuliu',
            'ibcourier',
            'iceland',
            'idexpress',
            'iex',
            'iexpress',
            'ilogen',
            'ilyang',
            'imlb2c',
            'indopaket',
            'inposdom',
            'inpost_paczkomaty',
            'interlink',
            'interparcel',
            'iparcel',
            'israelpost',
            'ixpress',
            'janio',
            'jerseypost',
            'jetexpresseg',
            'jetexpressgroup',
            'jetexpresszh',
            'jetstarexp',
            'jiuyicn',
            'jjx888',
            'jne',
            'jordan',
            'jsdky',
            'jsexpress',
            'jtexpressmy',
            'jtexpressph',
            'jumia',
            'jumsz',
            'juwu',
            'jxfex',
            'kahaexpress',
            'kangaroo',
            'kazpost',
            'kenya',
            'kerrythailand',
            'keypon',
            'kn',
            'koalaexp',
            'krtao',
            'kuaitao',
            'kuehnenagel',
            'kurasi',
            'kxda',
            'kyrgyzpost',
            'lanhukuaidi',
            'lao',
            'laposte',
            'lasy56',
            'latvia',
            'latviaen',
            'ldzy168',
            'ledaexpress',
            'ledaowuliu',
            'ledii',
            'leopard',
            'lesotho',
            'lexship',
            'lgs',
            'libanpost',
            'lionparcel',
            'liujiashen',
            'lmfex',
            'loadbugs',
            'logistics',
            'loomisexpress',
            'ltexp',
            'lundao',
            'luxembourg',
            'luxembourgde',
            'luxembourgfr',
            'macedonia',
            'maersk',
            'mailamericas',
            'mailongdy',
            'mainfreight',
            'maldives',
            'malta',
            'mapleexpress',
            'mascourierservice',
            'matkahuolto',
            'maxeedexpress',
            'mchy',
            'mecs',
            'meibang',
            'meidaexpress',
            'merage',
            'mexico',
            'mhsy',
            'milkyway',
            'mol',
            'mongolpost',
            'morocco',
            'mylerz',
            'nandan',
            'naqel',
            'nationex',
            'nedahm',
            'networkcourier',
            'nigerianpost',
            'ninjaxpress',
            'nipponexpress',
            'nokcourier',
            'norsk_global',
            'nyk',
            'ocsindia',
            'oman',
            'omniparcel',
            'oneworldexpress',
            'onway',
            'opek',
            'opex',
            'packlink',
            'panama',
            'pandulogistics',
            'paraguay',
            'parknparcel',
            'paxel',
            'paxelen',
            'pdstow',
            'peisihuoyunkuaidi',
            'peixingwuliu',
            'perfectservice',
            'pesto',
            'pflogistics',
            'pickupp',
            'pioneer',
            'portugalseur',
            'posindonesia',
            'postelbe',
            'postennorge',
            'postpng',
            'ppsuyun',
            'primamulticipta',
            'qdants',
            'qichen',
            'quanjitong',
            'quansutong',
            'qxpress',
            'qzx56',
            'r2slogistics',
            'ramgroup_za',
            'rapidocargoeg',
            'redexpress',
            'redur',
            'redur_es',
            'rl_carriers',
            'ruidianyouzhengen',
            'sagawaen',
            'salvador',
            'samoa',
            'sapexpress',
            'saudipost',
            'sccs',
            'scglogistics',
            'scic',
            'scsujiada',
            'sdsy888',
            'sendinglog',
            'sendle',
            'sfau',
            'sfcservice',
            'sfjhd',
            'shadowfax',
            'shallexp',
            'shanghaiwujiangmmb',
            'shbwch',
            'shengtongscm',
            'shipblu',
            'shlexp',
            'shreeanjanicourier',
            'shuanghe',
            'sicepat',
            'siodemka',
            'sixroad',
            'skyexpresseg',
            'skynetworldwide',
            'skypost',
            'skypostal',
            'slpost',
            'smsaexpress',
            'solomon',
            'sonapost',
            'speedaf',
            'speedegypt',
            'speedex',
            'spoton',
            'sprint',
            'ssd',
            'staky',
            'staryvr',
            'stlucia',
            'subaoex',
            'sudapost',
            'sufengkuaidi',
            'surpost',
            'svgpost',
            'swaziland',
            'szdpex',
            'szzss',
            'talabat',
            'taoplus',
            'taote',
            'tarrive',
            'tcxbthai',
            'thebluebhellcouriers',
            'thecourierguy',
            'tianxiang',
            'tianzong',
            'tiki',
            'timedg',
            'tipsa',
            'tirupati',
            'tmg',
            'togo',
            'topshey',
            'topspeedex',
            'tpcindia',
            'transkargologistics',
            'transporter',
            'turbo',
            'ubx',
            'uex',
            'ufelix',
            'ugoexpress',
            'ukrpost',
            'uniexpress',
            'unioncourier',
            'unitedexpress',
            'uparcel',
            'upsmailinno',
            'uschuaxia',
            'vangenexpress',
            'vanuatu',
            'viechina',
            'voo',
            'wadily',
            'wahana',
            'wassalnow',
            'wdm',
            'wedel',
            'wedepot',
            'welogistics',
            'wexpress',
            'whgjkd',
            'whistl',
            'winit',
            'wlfast',
            'wowexpress',
            'wxgbwl',
            'wxolys',
            'wygj168',
            'xilaikd',
            'xingyuankuaidi',
            'xinyan',
            'xiongda',
            'xpertdelivery',
            'xtb',
            'xunxuan',
            'xyjexpress',
            'yaoqi',
            'ydfexpress',
            'yidatong',
            'yidihui',
            'yiouzhou',
            'yishunhang',
            'yiyou',
            'yoseus',
            'youyibang',
            'ysexpress',
            'ystsd',
            'yunguo56',
            'yusen',
            'yyexp',
            'zampost',
            'zf365',
            'zhiguil',
            'zlxdjwl',
            'zsmhwl',
            'ztjieda',
        ];
        if (!in_array($shipping_code, $allow_shipping_code)) {
            throw new InvalidArgumentException('Current ShippingCode is not support');
        }

        if ('shunfeng' == $shipping_code && empty($phone)) {
            throw new InvalidArgumentException('This Order Need PhoneNumber');
        }

        $post['customer'] = $this->app_id;
        $data = [
            'com' => $shipping_code,
            'num' => $tracking_code,
        ];

        if (!empty($phone)) {
            $data['phone'] = $phone;
        }

        $post['param'] = json_encode($data);
        $post['sign'] = strtoupper(md5($post['param'].$this->app_key.$post['customer']));

        try {
            $response = $this->getHttpClient()->request('POST', $this->api, [
                'form_params' => $post,
            ])->getBody()->getContents();
        } catch (GuzzleException $e) {
            throw new HttpException($e->getMessage(), $e->getCode(), $e);
        }

        return $response;
    }

    /**
     * @return Client
     */
    public function getHttpClient()
    {
        return new Client($this->guzzleOptions);
    }

    /**
     * @return Client
     */
    public function getGuzzleOptions()
    {
        return new Client($this->guzzleOptions);
    }

    /**
     * @param $options
     */
    public function setGuzzleOptions($options)
    {
        $this->guzzleOptions = $options;
    }
}
